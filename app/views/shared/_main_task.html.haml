.task-main
  .main-header
    .main-header__left-box
      %h2.main-header__left-box__current-group
        = @group.name
      %ul.main-header__left-box__task-list
        %li.main-header__left-box__task-list--total
          タスク数：
          = @tasks.count
          件
        %li.main-header__left-box__task-list--complete
          完了数：
          = @tasks_completed.count
          件
        %li.main-header__left-box__task-list--pending
          未完了数：
          = @tasks_pending.count
          件
        %li.main-header__left-box__task-list--warning
          期限間近：
          = @tasks_warning.count
          件
        %li.main-header__left-box__task-list--overdue
          期限切れ：
          = @tasks_overdue.count
          件
    - if @group.authority == false
      = link_to edit_group_path(@group) do
        .main-header__edit-btn Edit

  .tasks
    - @tasks.each do |task|
      .task{data: {task: {id: task.id}}}
        .task--normal
          .task__upper-info
            %p.task__upper-info__talker
              = task.title
            %p.task__upper-info__date
              = task.created_at.to_s(:datetime)
          .task__lower-info
            %p.task__lower-info__target
              期限日：
              = I18n.l(task.target_dt)
              = I18n.l(task.target_tm, format: :tiny)
            %p.task__lower-info__complete
              完了日： 
              - if task.completed.present?
                = task.complete_at.to_s(:datetime)
              - else
                未達
          .task__hidden-info


  .form
    = form_with(model: @task, url: new_group_task_path) do |f| 
      - colspanlength = "5"
      %table
        %tbody
          %tr
            %td.field__label
              %label タイトル：
            %td{colspan: colspanlength}
              = f.text_field :title, class: 'field__text--title', placeholder: "type a title", value: @task.title 
          %tr
            %td.field__label
              %label 内容：
            %td{colspan: colspanlength}
              = f.text_field :description, class: 'field__text--description', placeholder: "type a description", value: @task.description 
          %tr
            %td.field__label
              %label 場所：
            %td{colspan: colspanlength}
              = f.text_field :place, class: 'field__text--place', placeholder: "type a place", value: @task.place 
          %tr
            %th.field__title--completed 完了
            %th.field__title--priority_id 重要度
            %th.field__title--target_dt 期限日
            %th.field__title--target_tm 期限時刻
            %th.field__title--warning_st_days 警告開始日数
            %th.field__title--tasklist タスクリスト
          %tr
            %td
              = f.check_box :completed, class: 'field__text--completed', value: @task.completed 
            %td
              = f.select :priority_id, [["--", 0], ["重要度1", 1], ["重要度2", 2], ["重要度3",3]], selected: @task.priority_id, class: 'field__combo--priority'
            %td
              = f.date_field :target_dt, class: 'field__text--date', value: @task.target_dt
            %td
              = f.time_field :target_tm, class: 'field__text--time', value: @task.target_tm
            %td
              = f.number_field :warning_st_days, class: 'field__text--warning_st_days', max: 31, min: 1, value: @task.warning_st_days 
              日前
            %td
              = f.select :group_id, current_user.groups.map { |gourp| [gourp.name, gourp.id] }, selected: @group.id, class: 'field__combo--tasklist'
      %input.submit-btn{name: "commit", type: "submit", value: "Save"}
